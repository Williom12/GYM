<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gym App PRO</title>

<style>
body{
    background:#000;
    color:#fff;
    font-family:Arial;
    margin:0;
}

header{
    background:#111;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
}

.menu{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:8px;
    padding:10px;
    background:#111;
}

button{
    background:#222;
    color:white;
    border:none;
    padding:10px 14px;
    border-radius:8px;
    cursor:pointer;
}

button:hover{ background:#333; }

.container{
    max-width:800px;
    margin:auto;
    padding:20px;
}

input{
    background:#111;
    border:1px solid #444;
    color:white;
    padding:6px;
    width:70px;
    margin:4px;
    border-radius:6px;
}

.card{
    background:#111;
    padding:15px;
    border-radius:10px;
    margin:10px 0;
}

.hidden{ display:none; }

.pr{
    color:#00ff88;
    font-weight:bold;
}
</style>
</head>

<body>

<header>GYM APP PRO ðŸ’ª</header>

<div id="perfilSelect" class="container">
<h2>Selecciona perfil</h2>
<button onclick="seleccionarPerfil('William')">William</button>
<button onclick="seleccionarPerfil('JuanManuel')">Juan Manuel</button>
</div>

<div id="menu" class="menu hidden">
<button onclick="mostrarDia(1)">Dia 1</button>
<button onclick="mostrarDia(2)">Dia 2</button>
<button onclick="mostrarDia(3)">Dia 3</button>
<button onclick="mostrarDia(4)">Dia 4</button>
<button onclick="mostrarDia(5)">Dia 5</button>
<button onclick="mostrarHistorial()">Historial</button>
<button onclick="mostrarProgreso()">Progreso</button>
</div>

<div class="container" id="contenido"></div>

<script>
let perfil="";

const rutina={
1:["Press inclinado","Fondos","Aperturas","Press cerrado","ExtensiÃ³n trÃ­ceps"],
2:["Dominadas","Remo barra","JalÃ³n pecho","Peso muerto rumano","Curl barra","Curl inclinado"],
3:["Sentadilla","Prensa","Curl femoral","ExtensiÃ³n cuÃ¡driceps","Gemelos"],
4:["Press militar","Elevaciones laterales","Elevaciones posteriores","Encogimientos","Crunch peso"],
5:["Press banca","Dominadas","Remo mancuerna","Curl + ExtensiÃ³n"]
};

function seleccionarPerfil(p){
    perfil=p;
    document.getElementById("perfilSelect").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
}

function keyDia(n){
    return perfil+"_dia"+n;
}

function limpiar(){
    document.getElementById("contenido").innerHTML="";
}

function mostrarDia(n){
    limpiar();
    let html=`<h2>Dia ${n} <input type="date" id="fecha"></h2>`;

    rutina[n].forEach((e,i)=>{
        html+=`
        <p>${e}
        <input id="kg${i}" placeholder="KG">
        Reps <input id="rep${i}">
        <span id="pr${i}" class="pr"></span>
        </p>`;
    });

    html+=`<button onclick="guardarDia(${n})">Guardar</button>`;
    document.getElementById("contenido").innerHTML=html;

    cargarDia(n);
    mostrarPR(n);
}

function guardarDia(n){

    let datos={
        fecha:document.getElementById("fecha").value,
        ejercicios:[]
    };

    rutina[n].forEach((_,i)=>{
        datos.ejercicios.push({
            kg:parseFloat(document.getElementById("kg"+i).value)||0,
            rep:document.getElementById("rep"+i).value
        });
    });

    localStorage.setItem(keyDia(n),JSON.stringify(datos));
    alert("Guardado âœ…");
}

function cargarDia(n){
    let datos=localStorage.getItem(keyDia(n));
    if(!datos) return;
    datos=JSON.parse(datos);

    document.getElementById("fecha").value=datos.fecha;

    datos.ejercicios.forEach((e,i)=>{
        document.getElementById("kg"+i).value=e.kg;
        document.getElementById("rep"+i).value=e.rep;
    });
}

function mostrarPR(n){

    rutina[n].forEach((e,i)=>{

        let max=0;

        for(let d=1;d<=5;d++){
            let datos=localStorage.getItem(perfil+"_dia"+d);
            if(datos){
                datos=JSON.parse(datos);
                if(datos.ejercicios[i]){
                    max=Math.max(max,datos.ejercicios[i].kg);
                }
            }
        }

        if(max>0){
            document.getElementById("pr"+i).innerText=" PR: "+max+"kg";
        }
    });
}

function mostrarHistorial(){
    limpiar();
    let html="<h2>Historial</h2>";

    for(let i=1;i<=5;i++){
        let datos=localStorage.getItem(keyDia(i));
        if(datos){
            datos=JSON.parse(datos);
            html+=`
            <div class="card">
            <b>Dia ${i}</b><br>
            Fecha: ${datos.fecha}<br><br>
            <button onclick="mostrarDia(${i})">Abrir</button>
            <button onclick="eliminarDia(${i})">Eliminar</button>
            </div>`;
        }
    }

    document.getElementById("contenido").innerHTML=html;
}

function eliminarDia(n){
    if(confirm("Â¿Eliminar dÃ­a?")){
        localStorage.removeItem(keyDia(n));
        mostrarHistorial();
    }
}

/* -------- PROGRESO SIMPLE -------- */

function mostrarProgreso(){
    limpiar();
    let html="<h2>Progreso General</h2>";

    for(let d=1;d<=5;d++){
        let datos=localStorage.getItem(keyDia(d));
        if(datos){
            datos=JSON.parse(datos);
            let total=0;
            datos.ejercicios.forEach(e=> total+=e.kg);
            html+=`<div class="card">Dia ${d} - Total levantado: ${total} kg</div>`;
        }
    }

    document.getElementById("contenido").innerHTML=html;
}
</script>

</body>
</html>
