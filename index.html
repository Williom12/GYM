<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GYM</title>

<link rel="manifest" href="manifest.json">

<style>
*{box-sizing:border-box;}

body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  height:100vh;
  overflow:hidden;
}

.container{
  max-width:500px;
  margin:auto;
  height:100vh;
  position:relative;
}

/* PAGINAS */
.page{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  overflow-y:auto;
  padding:15px;
  background:#000;
  display:none;
}

.page.active{display:block;}

h2{text-align:center;}

button{
  width:100%;
  padding:14px;
  margin:6px 0;
  background:#111;
  color:#fff;
  border:1px solid #333;
  border-radius:10px;
  font-size:16px;
}

input{
  width:65px;
  background:#111;
  color:#fff;
  border:1px solid #333;
  border-radius:6px;
  text-align:center;
}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.streak{font-size:18px;}

.dayCard{
  background:#111;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
}

.deleteBtn{
  background:#300;
  margin-top:8px;
}

.detailBox{
  background:#111;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

<div class="topbar">
<h2>GYM</h2>
<div id="streak">ðŸ”¥ 0</div>
</div>

<!-- PERFILES -->
<div id="profiles" class="page active">
<h2>Selecciona perfil</h2>
<button onclick="selectProfile('William')">William</button>
<button onclick="selectProfile('JuanManuel')">Juan Manuel</button>
</div>

<!-- MENU -->
<div id="menu" class="page">
<button onclick="openDay(1)">Dia 1</button>
<button onclick="openDay(2)">Dia 2</button>
<button onclick="openDay(3)">Dia 3</button>
<button onclick="openDay(4)">Dia 4</button>
<button onclick="openDay(5)">Dia 5</button>
<button onclick="openDias()">DÃ­as</button>
<button onclick="openProgreso()">Progreso</button>
</div>

<!-- DIA -->
<div id="dayPage" class="page">
<h2 id="dayTitle"></h2>
<div id="exerciseList"></div>
<button onclick="saveDay()">Guardar DÃ­a</button>
<button onclick="showPage('menu')">Volver</button>
</div>

<!-- HISTORIAL -->
<div id="dias" class="page">
<h2>DÃ­as registrados</h2>
<div id="daysList"></div>
<div id="dayDetail" class="detailBox" style="display:none"></div>
<button onclick="showPage('menu')">Volver</button>
</div>

<!-- PROGRESO -->
<div id="progreso" class="page">
<h2>Progreso</h2>
<canvas id="chart"></canvas>
<button onclick="showPage('menu')">Volver</button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
let currentProfile=null;
let currentDay=null;

/* RUTINAS */
const routines={
1:["Press inclinado mancuernas","Fondos paralelas","Aperturas mancuernas","Press cerrado","ExtensiÃ³n trÃ­ceps polea"],
2:["Dominadas","Remo barra","JalÃ³n pecho","Peso muerto rumano","Curl barra","Curl inclinado"],
3:["Sentadilla libre","Prensa","Curl femoral","ExtensiÃ³n cuÃ¡driceps","Gemelos pie"],
4:["Press militar","Elevaciones laterales","Elevaciones posteriores","Encogimientos barra","Crunch peso"],
5:["Press banca","Dominadas","Remo mancuerna","Curl + ExtensiÃ³n superserie"]
};

/* NAVEGACION APP */
function showPage(id){
document.querySelectorAll(".page").forEach(p=>{
p.classList.remove("active");
p.scrollTop=0;
});
document.getElementById(id).classList.add("active");
window.scrollTo(0,0);
}

/* PERFIL */
function selectProfile(name){
currentProfile=name;
updateStreak();
showPage("menu");
}

/* STORAGE */
function getData(){
return JSON.parse(localStorage.getItem("gym_"+currentProfile)||"[]");
}

function saveData(data){
localStorage.setItem("gym_"+currentProfile,JSON.stringify(data));
}

/* ABRIR DIA */
function openDay(n){
currentDay=n;

document.getElementById("dayTitle").innerText=
`Dia ${n} ${new Date().toLocaleDateString()}`;

const list=document.getElementById("exerciseList");
list.innerHTML="";

routines[n].forEach((ex,i)=>{
list.innerHTML+=`
<p>${ex}
 KG <input id="kg${i}">
 Reps <input id="rep${i}">
</p>`;
});

showPage("dayPage");
}

/* GUARDAR DIA */
function saveDay(){
const data=getData();

const exercises=routines[currentDay].map((ex,i)=>({
name:ex,
kg:document.getElementById("kg"+i).value||0,
reps:document.getElementById("rep"+i).value||0
}));

data.push({
day:currentDay,
date:new Date().toLocaleDateString(),
exercises
});

saveData(data);
updateStreak();

alert("Guardado âœ…");
showPage("menu");
}

/* RACHA */
function updateStreak(){
const data=getData();
document.getElementById("streak").innerText="ðŸ”¥ "+data.length;
}

/* DIAS */
function openDias(){
loadDays();
showPage("dias");
}

function loadDays(){
const container=document.getElementById("daysList");
container.innerHTML="";
document.getElementById("dayDetail").style.display="none";

const data=getData();

data.forEach((d,index)=>{

const card=document.createElement("div");
card.className="dayCard";
card.innerHTML=`Dia ${d.day} - ${d.date}`;

card.onclick=()=>showDetail(d);

const del=document.createElement("button");
del.className="deleteBtn";
del.innerText="Eliminar";
del.onclick=(e)=>{
e.stopPropagation();
data.splice(index,1);
saveData(data);
loadDays();
updateStreak();
};

card.appendChild(del);
container.appendChild(card);
});
}

/* VER DETALLE */
function showDetail(d){
const box=document.getElementById("dayDetail");
box.style.display="block";

let html=`<h3>Dia ${d.day} - ${d.date}</h3>`;
d.exercises.forEach(ex=>{
html+=`<p>${ex.name} â€” ${ex.kg} KG / ${ex.reps} reps</p>`;
});

box.innerHTML=html;
}

/* PROGRESO */
let chart=null;

function openProgreso(){
drawChart();
showPage("progreso");
}

function drawChart(){
const data=getData();

const labels=data.map(d=>d.date);
const values=data.map((_,i)=>i+1);

if(chart) chart.destroy();

chart=new Chart(document.getElementById("chart"),{
type:"line",
data:{
labels,
datasets:[{
label:"Entrenamientos",
data:values
}]
},
options:{responsive:true}
});
}
</script>

</body>
</html>
