<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GYM</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  display:flex;
  justify-content:center;
}

.container{
  width:100%;
  max-width:500px;
  padding:15px;
}

h1,h2{text-align:center;}

button{
  width:100%;
  padding:14px;
  margin:6px 0;
  background:#111;
  color:white;
  border:1px solid #333;
  border-radius:10px;
  font-size:16px;
}

input{
  width:70px;
  background:#111;
  color:white;
  border:1px solid #333;
  border-radius:6px;
  text-align:center;
}

.page{display:none;}
.active{display:block;}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.streak{
  font-size:18px;
}

.dayCard{
  background:#111;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  cursor:pointer;
}

.deleteBtn{
  background:#300;
  margin-top:8px;
}

.detailBox{
  background:#111;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="container">

<div class="topbar">
<h2>GYM</h2>
<div class="streak" id="streak">ðŸ”¥ 0</div>
</div>

<!-- PERFILES -->
<div id="profiles" class="page active">
<h2>Selecciona perfil</h2>
<button onclick="selectProfile('William')">William</button>
<button onclick="selectProfile('JuanManuel')">Juan Manuel</button>
</div>

<!-- MENU -->
<div id="menu" class="page">
<button onclick="openDay(1)">Dia 1</button>
<button onclick="openDay(2)">Dia 2</button>
<button onclick="openDay(3)">Dia 3</button>
<button onclick="openDay(4)">Dia 4</button>
<button onclick="openDay(5)">Dia 5</button>
<button onclick="showPage('dias')">DÃ­as</button>
<button onclick="showPage('progreso')">Progreso</button>
</div>

<!-- DIA -->
<div id="dayPage" class="page">
<h2 id="dayTitle"></h2>
<div id="exerciseList"></div>
<button onclick="saveDay()">Guardar DÃ­a</button>
<button onclick="showPage('menu')">Volver</button>
</div>

<!-- DIAS GUARDADOS -->
<div id="dias" class="page">
<h2>DÃ­as registrados</h2>
<div id="daysList"></div>

<div id="dayDetail" class="detailBox" style="display:none"></div>

<button onclick="showPage('menu')">Volver</button>
</div>

<!-- PROGRESO -->
<div id="progreso" class="page">
<h2>Progreso</h2>
<canvas id="chart"></canvas>
<button onclick="showPage('menu')">Volver</button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
let currentProfile=null;
let currentDay=null;

const routines={
1:["Press inclinado con mancuernas","Fondos en paralelas","Aperturas con mancuernas","Press cerrado","ExtensiÃ³n trÃ­ceps polea"],
2:["Dominadas","Remo con barra","JalÃ³n al pecho","Peso muerto rumano","Curl barra","Curl inclinado"],
3:["Sentadilla libre","Prensa","Curl femoral","ExtensiÃ³n cuÃ¡driceps","Gemelos de pie"],
4:["Press militar","Elevaciones laterales","Elevaciones posteriores","Encogimientos barra","Crunch con peso"],
5:["Press banca","Dominadas","Remo mancuerna","Curl + ExtensiÃ³n superserie"]
};

function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function selectProfile(name){
currentProfile=name;
updateStreak();
showPage("menu");
}

function getData(){
return JSON.parse(localStorage.getItem("gymData_"+currentProfile)||"[]");
}

function saveData(data){
localStorage.setItem("gymData_"+currentProfile,JSON.stringify(data));
}

function openDay(n){
currentDay=n;
document.getElementById("dayTitle").innerText=`Dia ${n} ${new Date().toLocaleDateString()}`;
const list=document.getElementById("exerciseList");
list.innerHTML="";

routines[n].forEach((ex,i)=>{
list.innerHTML+=`
<p>${ex}
 KG <input id="kg${i}">
 Reps <input id="rep${i}">
</p>`;
});

showPage("dayPage");
}

function saveDay(){
const date=new Date().toLocaleDateString();
let exercises=[];

routines[currentDay].forEach((ex,i)=>{
exercises.push({
name:ex,
kg:document.getElementById("kg"+i).value,
reps:document.getElementById("rep"+i).value
});
});

let data=getData();
data.push({day:currentDay,date,exercises});
saveData(data);

updateStreak();
alert("Guardado âœ…");
showPage("menu");
}

function updateStreak(){
const data=getData();
document.getElementById("streak").innerText="ðŸ”¥ "+data.length;
}

function loadDays(){
const container=document.getElementById("daysList");
container.innerHTML="";
const data=getData();

data.forEach((d,index)=>{
const div=document.createElement("div");
div.className="dayCard";
div.innerHTML=`Dia ${d.day} - ${d.date}`;

div.onclick=()=>showDetail(d);

const del=document.createElement("button");
del.className="deleteBtn";
del.innerText="Eliminar";
del.onclick=(e)=>{
e.stopPropagation();
data.splice(index,1);
saveData(data);
loadDays();
updateStreak();
};

div.appendChild(del);
container.appendChild(div);
});
}

function showDetail(d){
const box=document.getElementById("dayDetail");
box.style.display="block";

let html=`<h3>Dia ${d.day} - ${d.date}</h3>`;
d.exercises.forEach(ex=>{
html+=`<p>${ex.name} â€” ${ex.kg||0} KG / ${ex.reps||0} reps</p>`;
});

box.innerHTML=html;
}

function drawChart(){
const data=getData();
const labels=data.map(d=>d.date);
const values=data.map((_,i)=>i+1);

new Chart(document.getElementById("chart"),{
type:"line",
data:{
labels:labels,
datasets:[{label:"Entrenamientos",data:values}]
},
options:{responsive:true}
});
}

document.getElementById("dias").addEventListener("click",loadDays);
document.getElementById("progreso").addEventListener("click",drawChart);
</script>

</body>
</html>
