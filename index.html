<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>GYM</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
margin:0;
font-family:system-ui;
background:#000;
color:white;
}

/* HEADER */
header{
background:#0b0b0b;
text-align:center;
padding:18px;
font-size:24px;
font-weight:700;
letter-spacing:3px;
box-shadow:0 2px 10px rgba(0,0,0,.6);
}

/* PERFIL CENTER */
#perfil{
height:80vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:20px;
}

.perfilBtn{
width:220px;
padding:15px;
font-size:18px;
background:#111;
border-radius:12px;
border:1px solid #333;
transition:.2s;
}

.perfilBtn:hover{
background:#1a1a1a;
transform:scale(1.05);
}

/* MENU */
.menu{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:8px;
padding:12px;
background:#111;
}

.menu button{
background:#1b1b1b;
border-radius:10px;
padding:10px 14px;
}

.container{
max-width:850px;
margin:auto;
padding:20px;
}

input{
background:#0f0f0f;
border:1px solid #333;
color:white;
padding:6px;
width:75px;
border-radius:6px;
margin:5px;
}

.card{
background:#111;
border-radius:14px;
padding:15px;
margin:12px 0;
box-shadow:0 0 10px rgba(0,0,0,.5);
}

.pr{
color:#00ff9f;
font-weight:bold;
margin-left:8px;
}

.hidden{display:none}

button{
cursor:pointer;
color:white;
border:none;
}

.saveBtn{
margin-top:15px;
background:#00aa66;
padding:12px 20px;
border-radius:10px;
font-weight:bold;
}

</style>
</head>

<body>

<header>GYM üí™</header>

<!-- PERFIL -->
<div id="perfil">
<h2>Selecciona Perfil</h2>
<button class="perfilBtn" onclick="setPerfil('William')">William</button>
<button class="perfilBtn" onclick="setPerfil('JuanManuel')">Juan Manuel</button>
</div>

<div id="menu" class="menu hidden">
<button onclick="abrirDia(1)">D1</button>
<button onclick="abrirDia(2)">D2</button>
<button onclick="abrirDia(3)">D3</button>
<button onclick="abrirDia(4)">D4</button>
<button onclick="abrirDia(5)">D5</button>
<button onclick="historial()">Historial</button>
<button onclick="progreso()">Progreso</button>
</div>

<div id="app" class="container"></div>

<script>

/* ---------- ESTADO ---------- */

let perfilActual="";
let diaActual=null;

/* ---------- RUTINA ---------- */

const rutina={
1:["Press inclinado","Fondos","Aperturas","Press cerrado","Extensi√≥n tr√≠ceps"],
2:["Dominadas","Remo barra","Jal√≥n pecho","Peso muerto rumano","Curl barra","Curl inclinado"],
3:["Sentadilla","Prensa","Curl femoral","Extensi√≥n cu√°driceps","Gemelos"],
4:["Press militar","Elevaciones laterales","Elevaciones posteriores","Encogimientos","Crunch peso"],
5:["Press banca","Dominadas","Remo mancuerna","Curl + Extensi√≥n"]
};

/* ---------- PERFIL ---------- */

function setPerfil(p){
perfilActual=p;
perfil.classList.add("hidden");
menu.classList.remove("hidden");
}

/* ---------- STORAGE KEY ---------- */

function key(d){
return `${perfilActual}_dia_${d}`;
}

/* ---------- ABRIR DIA ---------- */

function abrirDia(d){

diaActual=d;

let html=`<h2>Dia ${d}
<input type="date" id="fecha_${d}">
</h2>`;

rutina[d].forEach((ej,i)=>{
html+=`
<div class="card">
${ej}<br>
KG <input id="kg_${d}_${i}">
Reps <input id="rep_${d}_${i}">
<span id="pr_${d}_${i}" class="pr"></span>
</div>`;
});

html+=`<button class="saveBtn" onclick="guardarDia()">Guardar</button>`;

app.innerHTML=html;

cargarDia(d);
mostrarPR(d);
}

/* ---------- GUARDAR ---------- */

function guardarDia(){

let d=diaActual;

let data={
fecha:document.getElementById(`fecha_${d}`).value,
ejercicios:[]
};

rutina[d].forEach((_,i)=>{

data.ejercicios.push({
kg:Number(document.getElementById(`kg_${d}_${i}`).value)||0,
rep:document.getElementById(`rep_${d}_${i}`).value
});

});

localStorage.setItem(key(d),JSON.stringify(data));

alert("Guardado ‚úÖ");
}

/* ---------- CARGAR ---------- */

function cargarDia(d){

let info=localStorage.getItem(key(d));
if(!info)return;

info=JSON.parse(info);

document.getElementById(`fecha_${d}`).value=info.fecha;

info.ejercicios.forEach((e,i)=>{
document.getElementById(`kg_${d}_${i}`).value=e.kg;
document.getElementById(`rep_${d}_${i}`).value=e.rep;
});
}

/* ---------- PR ---------- */

function mostrarPR(d){

rutina[d].forEach((_,i)=>{

let max=0;

for(let x=1;x<=5;x++){
let data=localStorage.getItem(key(x));
if(data){
data=JSON.parse(data);
if(data.ejercicios[i])
max=Math.max(max,data.ejercicios[i].kg);
}
}

if(max>0)
document.getElementById(`pr_${d}_${i}`).textContent=`üèÜ ${max}kg`;

});
}

/* ---------- HISTORIAL ---------- */

function historial(){

let html="<h2>Historial</h2>";

for(let d=1;d<=5;d++){

let data=localStorage.getItem(key(d));

if(data){
data=JSON.parse(data);

html+=`
<div class="card">
Dia ${d}<br>
Fecha: ${data.fecha}<br><br>
<button onclick="abrirDia(${d})">Abrir</button>
<button onclick="eliminarDia(${d})">Eliminar</button>
</div>`;
}
}

app.innerHTML=html;
}

function eliminarDia(d){
if(confirm("Eliminar d√≠a?")){
localStorage.removeItem(key(d));
historial();
}
}

/* ---------- GRAFICO ---------- */

function progreso(){

app.innerHTML=`<h2>Progreso üìà</h2><canvas id="chart"></canvas>`;

let labels=[];
let valores=[];

for(let d=1;d<=5;d++){
let data=localStorage.getItem(key(d));
if(data){
data=JSON.parse(data);

let total=0;
data.ejercicios.forEach(e=>total+=e.kg);

labels.push("Dia "+d);
valores.push(total);
}
}

new Chart(chart,{
type:"line",
data:{
labels,
datasets:[{
label:"Peso total",
data:valores,
tension:.3
}]
},
options:{
plugins:{legend:{labels:{color:"white"}}},
scales:{
x:{ticks:{color:"white"}},
y:{ticks:{color:"white"}}
}
}
});
}

</script>

</body>
</html>
